@page "/purchase"

@inject IViewInventoriesByNameUseCase ViewInventoryByNameUseCase

@rendermode InteractiveServer

<h3>Purchase Inventory</h3>
<br />

<AutoCompleteComponent Label="Inventory" SearchFunction="SearchInventory" OnItemSelected="HandleItemSelected"></AutoCompleteComponent>

<br />

@selectedItem?.Name

@code {
    private ItemViewModel? selectedItem;

    private List<ItemViewModel>? SearchInventory(string name)
    {
        var list = ViewInventoryByNameUseCase.ExecuteAsync(name).GetAwaiter().GetResult();

        if (list is null) return null;

        return list.Select(x => new ItemViewModel { Id = x.InventoryId, Name = x.InventoryName })?.ToList();
    }

    private void HandleItemSelected(ItemViewModel item)
    {
		this.selectedItem = item;
    }
} 
